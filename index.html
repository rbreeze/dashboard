<html>
<head>
<title>Health Data- Remington Breeze</title>
<link rel="stylesheet" href="style.css" type="text/css">
</head>

<body>

	<h1 class="header">
		<a href="http://rbreeze.github.io/" target="_blank">Remington Breeze</a>
	</h1>

	<div class="navigation">
		<a class="back button">Back</a>
		<a class="forward button">Forward</a>
		<a class="week button">Week View</a>
		<a class="month button">Month View</a>
	</div>

	<div class="mileage container">
		<h1>Miles &amp; Paces- <span class="whichWeek">This Week</span></h1>
		<canvas id="mileage" class="canvas"></canvas>
	</div>

	<div class="sleep container">
		<h1>Sleep- <span class="whichWeek">This Week</span></h1>
		<canvas id="sleep" class="canvas"></canvas>
	</div>

	<div class="water container">
		<h1>Water- <span class="whichWeek">This Week</span></h1>
		<canvas id="water" class="canvas"></canvas>
	</div>

	<div class="carbs container">
		<h1>Carbs &amp; Sugar- <span class="whichWeek">This Week</span></h1>
		<canvas id="carbs" class="canvas"></canvas>
	</div>

	<div class="fat container">
		<h1>Fat &amp; SatFat- <span class="whichWeek">This Week</span></h1>
		<canvas id="fat" class="canvas"></canvas>
	</div>

	<div class="protein container">
		<h1>Protein- <span class="whichWeek">This Week</span></h1>
		<canvas id="protein" class="canvas"></canvas>
	</div>

	<div class="calories container">
		<h1>Calories- <span class="whichWeek">This Week</span></h1>
		<canvas id="calories" class="canvas"></canvas>
	</div>

	<div class="avgMacronutrients container">
		<h1>Macronutrient Percentages- <span class="doughnutTime">Last Week</span></h1>
		<canvas id="avgMacronutrients" class="canvas"></canvas>
	</div>

	<div class="avgValues container">
		<h1> All Time Averages </h1>
		<table>
			<tr>
				<td class="left">Sleep</td>
				<td id="avgSleep"></td>
			</tr>
			<tr>
				<td class="left">Sugar</td>
				<td id="avgSugar"></td>
			</tr>
			<tr>
				<td class="left">Calories</td>
				<td id="avgCalories"></td>
			</tr>
			<tr>
				<td class="left">Mileage</td>
				<td id="avgMileage"></td>
			</tr>
			<tr>
				<td class="left">Pace</td>
				<td id="avgPace"></td>
			</tr>
		</table>
	</div>

	<script src="http://code.jquery.com/jquery-latest.min.js"></script>
	<script src="jquery-csv.min.js"></script>
	<script src="Chart.min.js"></script>
	<script src="chartData.js"></script>
	<script src="https://raw.githubusercontent.com/rbreeze/sheetCharts/gh-pages/sheetCharts.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {

      $('.canvas').each(function() {
         var parent = $(this).parent(); 
         var id = $(this).attr('id');
         this.remove();
         parent.append('<canvas class="canvas" id="' + id + '"></canvas>');
      });
 	
    	$('.month').css('border', '2px solid #32BAF9');

        var state = "month";
        var timeBlock = 0; 
        var timeBlockLength = 18; 

        function updateGraphs() {

        	var id = '1VdT0ZqbmH0D2vQS4ZS0nxKGiJesd8vCLM21Bs0r9mxc';

            switch(state) {
               case 'month': 
                  timeBlockLength = 18;
                  break;
               case 'week':
                  timeBlockLength = 7;
                  break;
               default:
                  timeBlockLength = 18;
                  break;
            }

            $('#mileage').newLineFromSheet({
               color: 'red',
               id: id, 
               sheet: 'Mileage',
               sheet2: 'Mileage',
               valueColumn: 1,
               valueColumn2: 3,
               scaleOverride: true,
               stepWidth: 1.5,
               minValue: 0, 
               maxValue: 13.5,
               timeBlockLength: timeBlockLength, 
               timeBlock: timeBlock
            });

            $('#sleep').newLineFromSheet({
               color: 'orange',
               id: id, 
               sheet: 'Sleep',
               scaleOverride: true,
               stepWidth: 50,
               minValue: 100, 
               maxValue: 600,
               timeBlockLength: timeBlockLength, 
               timeBlock: timeBlock
            });

            $('#water').newLineFromSheet({
               color: 'blue',
               id: id, 
               sheet: 'Water',
               scaleOverride: true,
               stepWidth: 8,
               minValue: 0, 
               maxValue: 124,
               timeBlockLength: timeBlockLength, 
               timeBlock: timeBlock
            });

            $('#carbs').newLineFromSheet({
               color: 'green',
               id: id, 
               sheet: 'Macronutrients',
               sheet2: 'Macronutrients',
               valueColumn: 1,
               valueColumn2: 2,
               scaleOverride: false,
               timeBlockLength: timeBlockLength, 
               timeBlock: timeBlock
            });

            $('#protein').newLineFromSheet({
               color: 'blue',
               id: id, 
               sheet: 'Macronutrients',
               valueColumn: 3,
               scaleOverride: true,
               stepWidth: 15,
               minValue: 0, 
               maxValue: 190,
               timeBlockLength: timeBlockLength, 
               timeBlock: timeBlock
            });

            $('#calories').newLineFromSheet({
               color: 'purple',
               id: id, 
               sheet: 'Macronutrients',
               valueColumn: 6,
               scaleOverride: true,
               stepWidth: 250,
               minValue: 0, 
               maxValue: 3700,
               timeBlockLength: timeBlockLength, 
               timeBlock: timeBlock
            });

            $('#fat').newLineFromSheet({
               color: 'red',
               id: id, 
               sheet: 'Macronutrients',
               sheet2: 'Macronutrients',
               valueColumn: 4,
               valueColumn2: 5,
               scaleOverride: true,
               stepWidth: 15,
               minValue: 0, 
               maxValue: 150,
               timeBlockLength: timeBlockLength, 
               timeBlock: timeBlock
            });

            $('#avgMacronutrients').newDoughnutFromSheet({
               id: id,
               sheet: 'avgMacronutrients',
               label1: 'Carbs',
               label2: 'Protein',
               label3: 'Fat',
               valueColumn2: 3,
               valueColumn3: 4,
               timeBlock: timeBlock
            });

            $('#avgSleep').newStatFromSheet({
               id: id,
               sheet: 'avgValues',
               valueRow: 1,
               label: 'minutes'
            });

            $('#avgSugar').newStatFromSheet({
               id: id, 
               sheet: 'avgValues',
               valueRow: 2, 
               label: 'grams'
            });

            $('#avgCalories').newStatFromSheet({
               id: id, 
               sheet: 'avgValues',
               valueRow: 3, 
               label: 'KCal'
            });

            $('#avgMileage').newStatFromSheet({
               id: id, 
               sheet: 'avgValues',
               valueRow: 4, 
               label: 'miles'
            });

            $('#avgPace').newStatFromSheet({
               id: id, 
               sheet: 'avgValues',
               valueRow: 5, 
               label: 'min/mile'
            });

            switch (state) {
               case 'week': 
                  if (timeBlock <= 0) {
                     $('.forward').hide();
                  } else {
                     $('.forward').show();
                  }
                  break;
               case 'month':
                  if (timeBlock <= 0) {
                     $('.forward').hide();
                  } else {
                     $('.forward').show();
                  }
                  break;
            }


            switch(timeBlock) {
               case 0:
                  $('.whichWeek').html('This '+state);
                  $('.doughnutTime').html('Last week');
                  break;
               case 1: 
                  $('.whichWeek').html('Last '+state);
                  $('.doughnutTime').html('2 weeks Ago');
                  break;
               default: 
                  $('.whichWeek').html(week +" "+ state +'s Ago');
                  $('.doughnutTime').html(week +' weeks Ago')
                  break;
            } 

         }

         updateGraphs();

         $('.back').click(function() {
            timeBlock += 1;
            updateGraphs();
         });

         $('.forward').click(function() {
            timeBlock -= 1; 
            updateGraphs();
         });

         $('.month').click(function() {
            state = "month";
            $('.month').css('border', '2px solid #32BAF9');
            $('.week').css('border', '1px solid #BBBBBB');
            updateGraphs();
         });

         $('.week').click(function() {
            state = "week";
            $('.week').css('border', '2px solid #32BAF9');
            $('.month').css('border', '1px solid #BBBBBB');
            updateGraphs();
         });
         
	});  
    </script>
</body>
</html>

